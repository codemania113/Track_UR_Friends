Ti.include("adv1.js");var nwin=Titanium.UI.createWindow({height:Ti.Platform.displayCaps.platformHeight,width:Ti.Platform.displayCaps.platformWidth,fullscreen:!0,backgroundColor:"#90EE90",exitOnClose:!0,navBarHidden:!0,orientationModes:[Ti.UI.LANDSCAPE_LEFT,Ti.UI.LANDSCAPE_RIGHT,Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT]});Titanium.Gesture.addEventListener("orientationchange",function(){nwin.height=Ti.Platform.displayCaps.platformHeight;nwin.width=Ti.Platform.displayCaps.platformWidth});
var aLabel=Ti.UI.createLabel({text:"Track Your Friends",color:"#ffffff",font:{fontSize:"30%",fontWeight:"bold"},height:"8%",backgroundColor:"#008B8B",width:"100%",top:"0%",textAlign:"center"}),tracelbl=Ti.UI.createLabel({text:"",color:"#F78181",font:{fontSize:"38%",fontWeight:"bold"},height:"10%",width:"100%",top:"10%",textAlign:"center"}),logoimage=Ti.UI.createButton({title:"",height:"6%",backgroundImage:"images/Logo.png",width:"20%",left:"2%",top:"1%"}),moblenum=Ti.UI.createTextField({height:"10%",
top:"25%",width:"80%",hintText:"Enter your Mobile Number",color:"#000000",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED}),password=Ti.UI.createTextField({height:"10%",top:"40%",width:"80%",hintText:"Enter your Password",passwordMask:!0,color:"#000000",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED}),login=Ti.UI.createButton({height:"8%",textAlign:"center",top:"55%",title:"",backgroundImage:"images/Login.png",width:"50%"});login.addEventListener("click",function(){validateInput()});
var newUser=Ti.UI.createLabel({text:"New User ? Register here.",color:"#000000",font:{fontSize:"20%",fontWeight:"bold"},height:"10%",width:"80%",backgroundColor:"#90EE90",top:"65%",textAlign:"center"}),Register=Ti.UI.createButton({title:"",height:"8%",textAlign:"center",width:"50%",backgroundImage:"images/Register.png",top:"75%"});Register.addEventListener("click",function(){Ti.UI.createWindow({backgroundColor:"#000000",title:"Test 000",url:"Register.js"}).open()});
var bLabel=Ti.UI.createLabel({text:"",color:"#BF9FAF",font:{fontSize:35,fontWeight:"bold"},height:"10%",width:"100%",backgroundColor:"#008B8B",top:"93%",left:"0%"}),bLabel=Ti.UI.createLabel({text:"",backgroundColor:" #008B8B",font:{fontSize:30,fontWeight:"bold"},height:"8%",width:"100%",top:"92%",textAlign:"center"}),advLabel=Ti.UI.createLabel({text:"",font:{fontSize:"13%",fontWeight:"bold"},color:"#ffffff",height:"7%",width:"65%",left:"35%",top:"93%"});advLabel.addEventListener("click",function(){Ti.Platform.openURL(adLink)});
var supportButton=Ti.UI.createButton({title:"",height:"7%",width:"27%",backgroundImage:"images/support.png",top:"93%",left:"2%"});supportButton.addEventListener("click",function(){(new (require("supportWindow").modalWin)).open()});var alertmsg=Titanium.UI.createAlertDialog({title:"Exit Application",message:"Do you want to exit ?",buttonNames:["Yes","No"],cancel:1});alertmsg.addEventListener("click",function(a){switch(a.index){case 0:Titanium.Android.currentActivity.finish()}});
nwin.addEventListener("android:back",function(){alertmsg.show()});nwin.add(aLabel);nwin.add(bLabel);nwin.add(logoimage);nwin.add(tracelbl);nwin.add(advLabel);nwin.add(moblenum);nwin.add(password);nwin.add(login);nwin.add(newUser);nwin.add(Register);nwin.add(supportButton);nwin.open();
function validateInput(){var a=moblenum.value,b=password.value,a=a.trim(),a=a.ltrim(),a=a.rtrim(),b=b.trim(),b=b.ltrim(),b=b.rtrim(),e=!1,d=!1,c=!1,f="";isNaN(a)||a.indexOf(" ")!=-1?f+="Please enter a Valid Mobile Number.\n":d=!0;a.length<1||a.length>10?f+="Your Mobile Number must be 1 to 10 Integers.\n":c=!0;b!==""?e=!0:f+="Passwords cannot be blank.\n";e===!0&&d===!0&&c===!0?CheckLogin(a,b):Titanium.UI.createAlertDialog({title:"Attention",message:f}).show()}
function CheckLogin(a,b){var e="http://www.visitindia.com/PeopleTracker/UserLogin.php?mnumber="+a+"&password="+b,d=Ti.Network.createHTTPClient({onload:function(){var c=this.responseText,c=c.trim(),c=c.ltrim(),c=c.rtrim();c==="Login"?(Titanium.App.Properties.setString("MobileNumber",a),Ti.UI.createWindow({backgroundColor:"#000000",title:"Test 000",url:"Home.js"}).open()):alert("Please Check your Mobile Number and Password !!!")},onerror:function(a){Ti.API.debug(a.error)},timeout:5E3});d.open("GET",
e);d.send()}String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.ltrim=function(){return this.replace(/^\s+/,"")};String.prototype.rtrim=function(){return this.replace(/\s+$/,"")};
