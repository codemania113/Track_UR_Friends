Ti.include("adv1.js");var nwin=Titanium.UI.createWindow({height:Ti.Platform.displayCaps.platformHeight,width:Ti.Platform.displayCaps.platformWidth,fullscreen:!0,backgroundColor:"#90EE90",exitOnClose:!0,navBarHidden:!0,orientationModes:[Ti.UI.LANDSCAPE_LEFT,Ti.UI.LANDSCAPE_RIGHT,Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT]});Titanium.Gesture.addEventListener("orientationchange",function(){nwin.height=Ti.Platform.displayCaps.platformHeight;nwin.width=Ti.Platform.displayCaps.platformWidth});
var aLabel=Ti.UI.createLabel({text:"",color:"#ffffff",font:{fontSize:"30%",fontWeight:"bold"},height:"8%",backgroundColor:"#008B8B",width:"100%",top:"0%",textAlign:"center"}),appnameLabel=Ti.UI.createLabel({text:"Track Your Friends",color:"#ffffff",textAlign:"right",font:{fontSize:"30%",fontWeight:"bold"},height:"8%",width:"80%",top:"0%"}),imagelogo=Ti.UI.createLabel({text:"",font:{fontSize:35,fontWeight:"bold"},height:"5%",width:"15%",backgroundImage:"images/Logo.png",top:"1%",left:"2%"}),Back=Ti.UI.createButton({title:"",
height:"6%",backgroundImage:"images/back.png",width:"27%",left:"2%",top:"1%"});Back.addEventListener("click",function(){Ti.UI.createWindow({url:"LoginWindow.js"}).open()});
var fullName=Ti.UI.createTextField({height:"10%",top:"20%",width:"80%",hintText:"Enter your Full Name.",color:"#000000",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED}),mobilenum=Ti.UI.createTextField({height:"10%",top:"35%",width:"80%",hintText:"Enter your Mobile Number",color:"#000000",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED}),emailid=Ti.UI.createTextField({height:"10%",top:"50%",width:"80%",hintText:"Enter your Email id",color:"#000000",keyboardType:Titanium.UI.KEYBOARD_EMAIL,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED}),
password=Ti.UI.createTextField({height:"10%",top:"65%",width:"80%",passwordMask:!0,hintText:"Enter your password",color:"#000000",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED}),Register=Ti.UI.createButton({title:"",height:"8%",textAlign:"center",width:"50%",backgroundImage:"images/Register.png",top:"80%"});Register.addEventListener("click",function(){validateInput()});
var bLabel=Ti.UI.createLabel({text:"",color:"#BF9FAF",font:{fontSize:35,fontWeight:"bold"},height:"10%",width:"100%",backgroundColor:"#008B8B",top:"93%",left:"0%"}),bLabel=Ti.UI.createLabel({text:"",backgroundColor:" #008B8B",font:{fontSize:30,fontWeight:"bold"},height:"8%",width:"100%",top:"92%",textAlign:"center"}),advLabel=Ti.UI.createLabel({text:"",font:{fontSize:"13%",fontWeight:"bold"},color:"#ffffff",height:"7%",width:"100%",textAlign:"center",top:"93%"});
advLabel.addEventListener("click",function(){Ti.Platform.openURL(adLink)});var supportButton=Ti.UI.createButton({title:"",height:"7%",width:"27%",backgroundImage:"images/support.png",top:"93%",left:"2%"});supportButton.addEventListener("click",function(){(new (require("modalWindow").modalWin)).open()});var alertmsg=Titanium.UI.createAlertDialog({title:"Exit Application",message:"Do you want to exit ?",buttonNames:["Yes","No"],cancel:1});alertmsg.addEventListener("click",function(a){switch(a.index){case 0:Titanium.Android.currentActivity.finish()}});
nwin.addEventListener("android:back",function(){alertmsg.show()});nwin.add(aLabel);nwin.add(appnameLabel);nwin.add(bLabel);nwin.add(Back);nwin.add(advLabel);nwin.add(fullName);nwin.add(password);nwin.add(emailid);nwin.add(mobilenum);nwin.add(Register);nwin.open();
function validateInput(){var a=fullName.value,c=mobilenum.value,b=emailid.value,d=password.value,a=a.trim(),a=a.ltrim(),a=a.rtrim(),c=c.trim(),c=c.ltrim(),c=c.rtrim(),b=b.trim(),b=b.ltrim(),b=b.rtrim(),d=d.trim(),d=d.ltrim(),d=d.rtrim(),g=!1,h=!0,i=!1,j=!1,k=!1,l=!1,e="";Ti.UI.createWindow({url:"",firstName:a,tabBarHidden:!1});a!==""?g=!0:e+="Please provide your Good Name.\n";isNaN(c)||c.indexOf(" ")!=-1?e+="Please enter a Valid Mobile Number.\n":k=!0;c.length<1||c.length>10?e+="Your Mobile Number must be 1 to 10 Integers.\n":
l=!0;/([\w-\.]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4})/g.test(b)&&b!==""?i=!0:e+=b===""?"Please enter a valid email address.\n":b+" is invalid email id. Please re-enter.\n";d!==""?j=!0:e+="Passwords cannot be blank.\n";for(var n=/[0-9]+(?:\.[0-9]*)?/,m=[a],f=0,o=m.length;f<o;f++)if(n.test(m[f])){e+="Fullname fields cannot contain numbers.\n";h=!1;break}h===!0&&g===!0&&i===!0&&j===!0&&k===!0&&l===!0?RegisterUser(a,c,b,d):Titanium.UI.createAlertDialog({title:"Attention",message:e}).show()}
function RegisterUser(a,c,b,d){a="http://www.visitindia.com/PeopleTracker/UserReg.php?name="+a+"&emailid="+b+"&mnumber="+c+"&password="+d;b=Ti.Network.createHTTPClient({onload:function(){var a=this.responseText,a=a.trim(),a=a.ltrim(),a=a.rtrim();a==="Success"&&(alert("You are Register Successfully. Please Login to Continue"),Ti.UI.createWindow({title:"Test 000",url:"LoginWindow.js"}).open());a=="User Exists"&&alert(c+" Already register with us !!! Please check your mobile number.")},onerror:function(a){Ti.API.debug(a.error);
alert("error")},timeout:5E3});b.open("GET",a);b.send()}String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.ltrim=function(){return this.replace(/^\s+/,"")};String.prototype.rtrim=function(){return this.replace(/\s+$/,"")};
